-- ==========================================
-- Created By NFC Badal
-- Fixed and Rewritten Version
-- ==========================================

-- ==========================================
-- SERVICES & VARIABLES
-- ==========================================

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService") -- Added for tween TP

local Player = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- Sea detection
local Sea1 = game.PlaceId == 2753915549
local Sea2 = game.PlaceId == 4442272183
local Sea3 = game.PlaceId == 7449423635

-- Variables
local AFKOptions = {}
local BossListT = {}
local PlayerLevel = Player:WaitForChild("Data"):WaitForChild("Level")
local MaxLevel = 2550

-- ==========================================
-- UI INITIALIZATION (AT TOP)
-- ==========================================

local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/REDzHUB/RedzLibV5/main/Source.Lua"))()

local Window = redzlib:MakeWindow({
    Title = "NFC Script : Blox Fruits",
    SubTitle = "by NFC Badal (Fixed)",
    SaveFolder = "redz Hub | Blox Fruits.lua"
})

-- Check if in correct game
if not (Sea1 or Sea2 or Sea3) then
    Window:MakeNotification({
        Name = "Wrong Game!",
        Content = "This script only works in Blox Fruits!",
        Time = 5
    })
    return
end

-- ==========================================
-- CONFIGURATION & GLOBALS
-- ==========================================

getgenv().FarmTool = "Melee"
getgenv().AutoFarm_Level = false
getgenv().AutoFarm_Nearest = false
getgenv().HealthSkill = 25
getgenv().ToolMastery = "Blox Fruit"
getgenv().AimBotSkill = true
getgenv().SkillZ = true
getgenv().SkillX = true
getgenv().SkillC = true
getgenv().SkillV = true
getgenv().SkillF = true
getgenv().TakeQuestBoss = true
getgenv().HealthPanic = 25
getgenv().PanicMode = true
getgenv().SeaLevelTP = "6"
getgenv().SeaBoatSpeed = 250
getgenv().Terrorshark = true
getgenv().Piranha = true
getgenv().FishCrewMember = true
getgenv().Shark = true
getgenv().PirateBrigade = true
getgenv().PirateGrandBrigade = true
getgenv().FishBoat = true
getgenv().SeaAimBotSkill = true
getgenv().SeaSkillZ = true
getgenv().SeaSkillX = true
getgenv().SeaSkillC = true
getgenv().SeaSkillV = true
getgenv().SeaSkillF = true
getgenv().UseTweenTP = false -- Added my own logic: Toggle for tween TP
getgenv().BringMobs = false -- Added my own logic: Bring mobs to player
getgenv().AutoElite = false -- Added my own logic: Auto Elite Hunter

-- ==========================================
-- UTILITY FUNCTIONS
-- ==========================================

local function FireRemote(...)
    pcall(function()
        local args = {...}
        ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
    end)
end

local function VerifyNPC(name)
    for _, v in pairs(Workspace.Enemies:GetChildren()) do
        if v.Name == name and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
            return true
        end
    end
    return false
end

local function PlayerTP(cframe)
    pcall(function()
        local char = Player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            if getgenv().UseTweenTP then
                local distance = (char.HumanoidRootPart.Position - cframe.Position).Magnitude
                local speed = 300 -- Added my own logic: Adjustable speed
                local tweenInfo = TweenInfo.new(distance / speed, Enum.EasingStyle.Linear)
                local tween = TweenService:Create(char.HumanoidRootPart, tweenInfo, {CFrame = cframe})
                tween:Play()
                tween.Completed:Wait()
            else
                char.HumanoidRootPart.CFrame = cframe
            end
        end
    end)
end

local function EquipTooltip(tooltip)
    pcall(function()
        for _, tool in pairs(Player.Character:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == tooltip then
                Player.Character.Humanoid:EquipTool(tool)
                return
            end
        end
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == tooltip then
                Player.Character.Humanoid:EquipTool(tool)
                return
            end
        end
    end)
end

local function verifyTooltip(tooltip)
    for _, tool in pairs(Player.Character:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == tooltip then
            return true
        end
    end
    for _, tool in pairs(Player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == tooltip then
            return true
        end
    end
    return false
end

local function KeyboardPress(key)
    pcall(function()
        game:GetService("VirtualInputManager"):SendKeyEvent(true, key, false, game)
        task.wait(0.1)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, key, false, game)
    end)
end

local function AimBotPart(part)
    pcall(function()
        local char = Player.Character
        if char and char:FindFirstChild("HumanoidRootPart") and part then
            char.HumanoidRootPart.CFrame = CFrame.new(char.HumanoidRootPart.Position, part.Position)
        end
    end)
end

local function ServerHop()
    local Http = game:GetService("HttpService")
    local TPS = game:GetService("TeleportService")
    local Api = "https://games.roblox.com/v1/games/"
    
    local _place = game.PlaceId
    local _servers = Api.._place.."/servers/Public?sortOrder=Asc&limit=100"
    
    local function ListServers(cursor)
        local Raw = game:HttpGet(_servers .. ((cursor and "&cursor="..cursor) or ""))
        return Http:JSONDecode(Raw)
    end
    
    local Server, Next
    repeat
        local Servers = ListServers(Next)
        Server = Servers.data[1]
        Next = Servers.nextPageCursor
    until Server
    
    TPS:TeleportToPlaceInstance(_place, Server.id, Player)
end

local function BuyNewBoat()
    FireRemote("BuyBoat", "PirateBrigade")
end

-- Added my own logic: Bring mob function
local function BringMob(enemy)
    pcall(function()
        if enemy and enemy:FindFirstChild("HumanoidRootPart") and Player.Character:FindFirstChild("HumanoidRootPart") then
            enemy.HumanoidRootPart.CFrame = Player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 5) -- Bring in front
            enemy.HumanoidRootPart.Anchored = true
            task.wait(0.1)
            enemy.HumanoidRootPart.Anchored = false
        end
    end)
end

-- ==========================================
-- FARM FUNCTIONS
-- ==========================================

function AutoFarm_Level()
    while getgenv().AutoFarm_Level do
        task.wait()
        pcall(function()
            local quest = Player.PlayerGui.Main.Quest
            if quest.Visible then
                for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                    if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                        until not getgenv().AutoFarm_Level or enemy.Humanoid.Health <= 0
                    end
                end
            else
                -- Added my own logic: Attempt to take quest if not visible
                FireRemote("StartQuest", "BanditQuest1", 1) -- Example, replace with dynamic
            end
        end)
    end
end

function AutoFarm_Nearest()
    while getgenv().AutoFarm_Nearest do
        task.wait()
        pcall(function()
            local nearest = nil
            local nearestDist = math.huge
            
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                    local dist = (Player.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                    if dist < nearestDist then
                        nearestDist = dist
                        nearest = enemy
                    end
                end
            end
            
            if nearest then
                repeat
                    task.wait()
                    EquipTooltip(getgenv().FarmTool)
                    PlayerTP(nearest.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                    if getgenv().BringMobs then
                        BringMob(nearest)
                    end
                until not getgenv().AutoFarm_Nearest or nearest.Humanoid.Health <= 0
            end
        end)
    end
end

function AutoPiratesSea()
    while getgenv().AutoPiratesSea do
        task.wait()
        pcall(function()
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if string.find(enemy.Name, "Pirate") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                    repeat
                        task.wait()
                        EquipTooltip(getgenv().FarmTool)
                        PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                        if getgenv().BringMobs then
                            BringMob(enemy)
                        end
                    until not getgenv().AutoPiratesSea or enemy.Humanoid.Health <= 0
                end
            end
        end)
    end
end

function AutoFactory()
    while getgenv().AutoFactory do
        task.wait()
        pcall(function()
            FireRemote("requestEntrance", Vector3.new(424.446533, 211.63623, -2725.08447))
        end)
    end
end

function AutoFarmBone()
    while getgenv().AutoFarmBone do
        task.wait()
        pcall(function()
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if enemy.Name == "Reborn Skeleton" or enemy.Name == "Living Zombie" or enemy.Name == "Demonic Soul" or enemy.Name == "Posessed Mummy" then
                    if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                        until not getgenv().AutoFarmBone or enemy.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

function AutoSoulReaper()
    while getgenv().AutoSoulReaper do
        task.wait()
        pcall(function()
            FireRemote("Bones", "Buy", 1, 2)
        end)
    end
end

function AutoFarmEctoplasm()
    while getgenv().AutoFarmEctoplasm do
        task.wait()
        pcall(function()
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if enemy.Name == "Ship Deckhand" or enemy.Name == "Ship Engineer" or enemy.Name == "Ship Steward" or enemy.Name == "Ship Officer" then
                    if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                        until not getgenv().AutoFarmEctoplasm or enemy.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

function AutoChestTween()
    while getgenv().AutoChestTween do
        task.wait()
        pcall(function()
            for _, chest in pairs(Workspace:GetChildren()) do
                if chest.Name == "Chest1" or chest.Name == "Chest2" or chest.Name == "Chest3" then
                    PlayerTP(chest.CFrame)
                    task.wait(0.5)
                end
            end
        end)
    end
end

function AutoChestBypass()
    while getgenv().AutoChestBypass do
        task.wait()
        pcall(function()
            for _, chest in pairs(Workspace:GetChildren()) do
                if chest.Name == "Chest1" or chest.Name == "Chest2" or chest.Name == "Chest3" then
                    Player.Character.HumanoidRootPart.CFrame = chest.CFrame
                    task.wait(0.3)
                end
            end
        end)
    end
end

function AutoFarmBossSelected()
    while getgenv().AutoFarmBossSelected do
        task.wait()
        pcall(function()
            if getgenv().TakeQuestBoss then
                -- Added my own logic: Example quest take for selected boss
                FireRemote("StartQuest", getgenv().BossSelected .. "Quest1", 1) -- Placeholder, customize per boss
            end
            
            for _, boss in pairs(Workspace.Enemies:GetChildren()) do
                if boss.Name == getgenv().BossSelected and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                    repeat
                        task.wait()
                        EquipTooltip(getgenv().FarmTool)
                        PlayerTP(boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                        if getgenv().BringMobs then
                            BringMob(boss)
                        end
                    until not getgenv().AutoFarmBossSelected or boss.Humanoid.Health <= 0
                end
            end
        end)
    end
end

function KillAllBosses()
    while getgenv().KillAllBosses do
        task.wait()
        pcall(function()
            for _, boss in pairs(Workspace.Enemies:GetChildren()) do
                if boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 and boss:FindFirstChild("HumanoidRootPart") then
                    local isBoss = false
                    for _, bossName in pairs(BossListT) do
                        if boss.Name == bossName then
                            isBoss = true
                            break
                        end
                    end
                    
                    if isBoss then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(boss.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(boss)
                            end
                        until not getgenv().KillAllBosses or boss.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

function AutoFarmMaterial()
    while getgenv().AutoFarmMaterial do
        task.wait()
        pcall(function()
            local materialMobs = {
                ["Angel Wings"] = {"Royal Soldier", "Royal Squad"},
                ["Leather + Scrap Metal"] = {"Pirate", "Brute"},
                ["Magma Ore"] = {"Military Soldier", "Military Spy"},
                ["Fish Tail"] = {"Fishman Warrior", "Fishman Commando"},
                ["Mystic Droplet"] = {"Water Fighter", "Sea Soldier"},
                ["Radiactive Material"] = {"Factory Staff"},
                ["Vampire Fang"] = {"Vampire"},
                ["Gunpowder"] = {"Pistol Billionaire"},
                ["Mini Tusk"] = {"Mythological Pirate"},
                ["Conjured Cocoa"] = {"Chocolate Bar Battler", "Sweet Thief"},
                ["Dragon Scale"] = {"Dragon Crew Warrior"}
            }
            
            local mobs = materialMobs[getgenv().MaterialSelected] or {}
            
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                for _, mobName in pairs(mobs) do
                    if enemy.Name == mobName and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                        until not getgenv().AutoFarmMaterial or enemy.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

function AutoFarmMastery()
    while getgenv().AutoFarmMastery do
        task.wait()
        pcall(function()
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                    if enemy.Humanoid.Health <= (enemy.Humanoid.MaxHealth * getgenv().HealthSkill / 100) then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().ToolMastery)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                            if getgenv().AimBotSkill then
                                AimBotPart(enemy.HumanoidRootPart)
                            end
                            
                            if getgenv().SkillZ then KeyboardPress("Z") end
                            if getgenv().SkillX then KeyboardPress("X") end
                            if getgenv().SkillC then KeyboardPress("C") end
                            if getgenv().SkillV then KeyboardPress("V") end
                            if getgenv().SkillF then KeyboardPress("F") end
                        until not getgenv().AutoFarmMastery or enemy.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

function AutoKitsuneIsland()
    while getgenv().AutoKitsuneIsland do
        task.wait()
        pcall(function()
            local Map = Workspace:WaitForChild("Map")
            if Map:FindFirstChild("KitsuneIsland") then
                PlayerTP(Map.KitsuneIsland:GetPivot())
            end
        end)
    end
end

function AutoFarmSea()
    while getgenv().AutoFarmSea do
        task.wait()
        pcall(function()
            -- Added my own logic: Buy boat if not present
            if not Workspace.Boats:FindFirstChildWhichIsA("Model") then
                BuyNewBoat()
                task.wait(2)
            end
            for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                if (getgenv().Terrorshark and enemy.Name == "Terrorshark") or
                   (getgenv().Piranha and enemy.Name == "Piranha") or
                   (getgenv().Shark and enemy.Name == "Shark") or
                   (getgenv().FishCrewMember and enemy.Name == "Fish Crew Member") then
                    if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        repeat
                            task.wait()
                            EquipTooltip(getgenv().FarmTool)
                            PlayerTP(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                            if getgenv().BringMobs then
                                BringMob(enemy)
                            end
                            if getgenv().SeaAimBotSkill then
                                AimBotPart(enemy.HumanoidRootPart)
                            end
                            
                            if getgenv().SeaSkillZ then KeyboardPress("Z") end
                            if getgenv().SeaSkillX then KeyboardPress("X") end
                            if getgenv().SeaSkillC then KeyboardPress("C") end
                            if getgenv().SeaSkillV then KeyboardPress("V") end
                            if getgenv().SeaSkillF then KeyboardPress("F") end
                        until not getgenv().AutoFarmSea or enemy.Humanoid.Health <= 0
                    end
                end
            end
        end)
    end
end

-- Added my own logic: Auto Elite Hunter
function AutoElite()
    while getgenv().AutoElite do
        task.wait()
        pcall(function()
            FireRemote("EliteHunter") -- Take quest
            for _, elite in pairs(Workspace.Enemies:GetChildren()) do
                if string.find(elite.Name, "Elite") and elite:FindFirstChild("Humanoid") and elite.Humanoid.Health > 0 then
                    repeat
                        task.wait()
                        EquipTooltip(getgenv().FarmTool)
                        PlayerTP(elite.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0))
                        if getgenv().BringMobs then
                            BringMob(elite)
                        end
                    until not getgenv().AutoElite or elite.Humanoid.Health <= 0
                end
            end
        end)
    end
end

-- ==========================================
-- MAIN FARM TAB
-- ==========================================

local MainFarm = Window:MakeTab({"Farm", "Home"})

MainFarm:AddDropdown({
    Name = "Farm Tool",
    Options = {"Melee", "Sword", "Blox Fruit"},
    Default = "Melee",
    Flag = "Main/FarmTool",
    Callback = function(Value)
        getgenv().FarmTool = Value
    end
})

if PlayerLevel.Value >= MaxLevel and Sea3 then
    MainFarm:AddToggle({
        Name = "Start Multi Farm < BETA >",
        Callback = function(Value)
            for _, toggle in pairs(AFKOptions) do
                task.spawn(function()
                    toggle:Set(Value)
                end)
            end
        end
    })
end

MainFarm:AddSection({"Farm"})

MainFarm:AddToggle({
    Name = "Auto Farm Level",
    Default = false,
    Callback = function(Value)
        getgenv().AutoFarm_Level = Value
        if Value then task.spawn(AutoFarm_Level) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Nearest",
    Default = false,
    Callback = function(Value)
        getgenv().AutoFarm_Nearest = Value
        if Value then task.spawn(AutoFarm_Nearest) end
    end
})

if Sea3 then
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Pirates Sea",
        Default = false,
        Callback = function(Value)
            getgenv().AutoPiratesSea = Value
            if Value then task.spawn(AutoPiratesSea) end
        end
    }))
elseif Sea2 then
    MainFarm:AddToggle({
        Name = "Auto Factory",
        Default = false,
        Callback = function(Value)
            getgenv().AutoFactory = Value
            if Value then task.spawn(AutoFactory) end
        end
    })
end

if Sea3 then
    MainFarm:AddSection({"Bone"})
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Farm Bone",
        Callback = function(Value)
            getgenv().AutoFarmBone = Value
            if Value then task.spawn(AutoFarmBone) end
        end
    }))
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Hallow Scythe",
        Callback = function(Value)
            getgenv().AutoSoulReaper = Value
            if Value then task.spawn(AutoSoulReaper) end
        end
    }))
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Trade Bone",
        Callback = function(Value)
            getgenv().AutoTradeBone = Value
            task.spawn(function()
                while getgenv().AutoTradeBone do
                    task.wait(1)
                    FireRemote("Bones", "Buy", 1, 1)
                end
            end)
        end
    }))
end

if Sea2 then
    MainFarm:AddSection({"Ectoplasm"})
    MainFarm:AddToggle({
        Name = "Auto Farm Ectoplasm",
        Callback = function(Value)
            getgenv().AutoFarmEctoplasm = Value
            if Value then task.spawn(AutoFarmEctoplasm) end
        end
    })
end

MainFarm:AddSection({"Chest"})

MainFarm:AddToggle({
    Name = "Auto Chest < Tween >",
    Callback = function(Value)
        getgenv().AutoChestTween = Value
        if Value then task.spawn(AutoChestTween) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Chest < Bypass >",
    Callback = function(Value)
        getgenv().AutoChestBypass = Value
        if Value then task.spawn(AutoChestBypass) end
    end
})

MainFarm:AddSection({"Bosses"})

BossListT = {
    "The Gorilla King", "Bobby", "Yeti", "Mob Leader", "Vice Admiral", 
    "Warden", "Chief Warden", "Swan", "Magma Admiral", "Fishman Lord",
    "Wysper", "Thunder God", "Cyborg", "Saber Expert",
    -- Added my own logic: More bosses
    "Diamond", "Jeremy", "Fajita", "Don Swan", "Smoke Admiral",
    "Cursed Captain", "Awakened Ice Admiral", "Tide Keeper",
    "Rip Indra", "Dough King", "Cake Prince"
}

local function UpdateBossList()
    local NewOptions = {}
    for _, NameBoss in pairs(BossListT) do
        if VerifyNPC(NameBoss) then
            table.insert(NewOptions, NameBoss)
        end
    end
    return NewOptions
end

MainFarm:AddButton({
    Name = "Update Boss List",
    Callback = function()
        pcall(UpdateBossList)
    end
})

local BossList = MainFarm:AddDropdown({
    Name = "Boss List",
    Options = UpdateBossList(),
    Callback = function(Value)
        getgenv().BossSelected = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Boss Selected",
    Callback = function(Value)
        getgenv().AutoFarmBossSelected = Value
        if Value then task.spawn(AutoFarmBossSelected) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm All Boss",
    Callback = function(Value)
        getgenv().KillAllBosses = Value
        if Value then task.spawn(KillAllBosses) end
    end
})

MainFarm:AddToggle({
    Name = "Take Quest",
    Default = true,
    Callback = function(Value)
        getgenv().TakeQuestBoss = Value
    end
})

MainFarm:AddButton({
    Name = "Server HOP",
    Callback = function()
        ServerHop()
    end
})

MainFarm:AddSection({"Material"})

local MaterialList = {}
if Sea1 then
    MaterialList = {"Angel Wings", "Leather + Scrap Metal", "Magma Ore", "Fish Tail"}
elseif Sea2 then
    MaterialList = {"Leather + Scrap Metal", "Magma Ore", "Mystic Droplet", "Radiactive Material", "Vampire Fang"}
elseif Sea3 then
    MaterialList = {"Leather + Scrap Metal", "Fish Tail", "Gunpowder", "Mini Tusk", "Conjured Cocoa", "Dragon Scale"}
end

MainFarm:AddDropdown({
    Name = "Material List",
    Options = MaterialList,
    Flag = "Material/Selected",
    Callback = function(Value)
        getgenv().MaterialSelected = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Material",
    Callback = function(Value)
        getgenv().AutoFarmMaterial = Value
        if Value then task.spawn(AutoFarmMaterial) end
    end
})

MainFarm:AddSection({"Mastery"})

MainFarm:AddSlider({
    Name = "Select Health",
    Min = 10,
    Max = 100,
    Default = 25,
    Callback = function(Value)
        getgenv().HealthSkill = Value
    end
})

MainFarm:AddDropdown({
    Name = "Select Tool",
    Options = {"Blox Fruit", "Melee", "Sword", "Gun"},
    Default = "Blox Fruit",
    Callback = function(Value)
        getgenv().ToolMastery = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Mastery",
    Callback = function(Value)
        getgenv().AutoFarmMastery = Value
        if Value then task.spawn(AutoFarmMastery) end
    end
})

MainFarm:AddSection({"Skill"})

MainFarm:AddToggle({
    Name = "AimBot Skill Enemy",
    Flag = "Mastery/Aimbot",
    Default = true,
    Callback = function(Value)
        getgenv().AimBotSkill = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill Z",
    Flag = "Mastery/Z",
    Default = true,
    Callback = function(Value)
        getgenv().SkillZ = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill X",
    Flag = "Mastery/X",
    Default = true,
    Callback = function(Value)
        getgenv().SkillX = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill C",
    Flag = "Mastery/C",
    Default = true,
    Callback = function(Value)
        getgenv().SkillC = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill V",
    Flag = "Mastery/V",
    Default = true,
    Callback = function(Value)
        getgenv().SkillV = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill F",
    Flag = "Mastery/F",
    Default = true,
    Callback = function(Value)
        getgenv().SkillF = Value
    end
})

-- Added my own logic: Additional toggles
MainFarm:AddToggle({
    Name = "Use Tween for TP",
    Default = false,
    Callback = function(Value)
        getgenv().UseTweenTP = Value
    end
})

MainFarm:AddToggle({
    Name = "Bring Mobs",
    Default = false,
    Callback = function(Value)
        getgenv().BringMobs = Value
    end
})

if Sea3 then
    MainFarm:AddToggle({
        Name = "Auto Elite Hunter",
        Default = false,
        Callback = function(Value)
            getgenv().AutoElite = Value
            if Value then task.spawn(AutoElite) end
        end
    })
end

-- ==========================================
-- SEA TAB (Sea 3 Only)
-- ==========================================

if Sea3 then
    local AutoSea = Window:MakeTab({"Sea", "Waves"})
    
    AutoSea:AddSection({"Kitsune"})
    
    local KILabel = AutoSea:AddParagraph({"Kitsune Island : not spawn"})
    
    AutoSea:AddToggle({
        Name = "Auto Kitsune Island",
        Callback = function(Value)
            getgenv().AutoKitsuneIsland = Value
            if Value then task.spawn(AutoKitsuneIsland) end
        end
    })
    
    AutoSea:AddToggle({
        Name = "Auto Trade Azure Ember",
        Callback = function(Value)
            getgenv().TradeAzureEmber = Value
            task.spawn(function()
                while getgenv().TradeAzureEmber do
                    task.wait(1)
                    pcall(function()
                        local Modules = ReplicatedStorage:WaitForChild("Modules", 9e9)
                        local Net = Modules:WaitForChild("Net", 9e9)
                        local KitsuneRemote = Net:WaitForChild("RF/KitsuneStatuePray", 9e9)
                        KitsuneRemote:InvokeServer()
                    end)
                end
            end)
        end
    })
    
    task.spawn(function()
        local Map = Workspace:WaitForChild("Map", 9e9)
        local Distance = "Unknown"
        
        task.spawn(function()
            while task.wait() do
                pcall(function()
                    if Map:FindFirstChild("KitsuneIsland") then
                        local plrPP = Player.Character and Player.Character.PrimaryPart
                        if plrPP then
                            Distance = tostring(
                                math.floor((plrPP.Position - Map.KitsuneIsland:GetPivot().Position).Magnitude / 3)
                            )
                        end
                    end
                end)
            end
        end)
        
        while task.wait(1) do
            pcall(function()
                if Map:FindFirstChild("KitsuneIsland") then
                    KILabel:Set("Kitsune Island : " .. Distance .. " studs")
                else
                    KILabel:Set("Kitsune Island : not spawn")
                end
            end)
        end
    end)
    
    AutoSea:AddSection({"Sea Farm"})
    
    AutoSea:AddToggle({
        Name = "Auto Farm Sea",
        Callback = function(Value)
            getgenv().AutoFarmSea = Value
            if Value then task.spawn(AutoFarmSea) end
        end
    })
    
    AutoSea:AddToggle({
        Name = "Terrorshark",
        Default = true,
        Callback = function(Value)
            getgenv().Terrorshark = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Piranha",
        Default = true,
        Callback = function(Value)
            getgenv().Piranha = Value
        end
    })
    
    -- Add more toggles for sea mobs if needed
end

-- ==========================================
-- TELEPORT TAB (Added my own logic)
-- ==========================================

local TeleportTab = Window:MakeTab({"Teleport", "World"})

TeleportTab:AddSection({"Teleport Options"})

TeleportTab:AddToggle({
    Name = "Use Tween for Teleport",
    Default = false,
    Callback = function(Value)
        getgenv().UseTweenTP = Value
    end
})

-- Island CFrames (Accurate as of late 2025)
local IslandCFrames = {
    -- First Sea
    ["Pirate Starter"] = CFrame.new(982.604, 121.888, 929.724),
    ["Marine Starter"] = CFrame.new(-2713.37, 7.23, 2080.15),
    ["Middle Town"] = CFrame.new(-690.33, 15.094, 1580.04),
    ["Jungle"] = CFrame.new(-1211.88, 4.787, -1556.34),
    ["Pirate Village"] = CFrame.new(-1169.536, 4.787, 1719.594),
    ["Desert"] = CFrame.new(1094.145, 6.473, 4192.887),
    ["Frozen Village"] = CFrame.new(1198.009, 27.272, -1211.372),
    ["Marine Fortress"] = CFrame.new(-4905.093, 43.772, 4305.653),
    ["Prison"] = CFrame.new(4854.164, 5.687, 740.194),
    ["Colosseum"] = CFrame.new(-1428.354, 7.389, -3014.373),
    ["Magma Village"] = CFrame.new(-5231.76, 8.48, -9029.37),
    ["Underwater City"] = CFrame.new(3832.62, 5.33, -1217.48),
    ["Fountain City"] = CFrame.new(5127.47, 5.33, 4093.65),
    ["Sky Island 1"] = CFrame.new(-4872.38, 717.68, -2637.47),
    ["Sky Island 2"] = CFrame.new(-7908.23, 5635.99, -759.71),
    ["Sky Island 3"] = CFrame.new(-7894.62, 5545.49, -380.246),

    -- Second Sea
    ["Kingdom of Rose"] = CFrame.new(-748.15, 7.45, 5750.85),
    ["Cafe"] = CFrame.new(-379.708, 73.045, 304.846),
    ["Green Zone"] = CFrame.new(-2372.146, 72.991, -3166.514),
    ["Graveyard"] = CFrame.new(-5411.476, 48.757, 845.276),
    ["Snow Mountain"] = CFrame.new(-5420.166, 15.518, -5298.543),
    ["Hot and Cold"] = CFrame.new(-6026.964, 15.98, -6939.816),
    ["Cursed Ship"] = CFrame.new(919.25, 125.93, 33045.25),
    ["Ice Castle"] = CFrame.new(5400.403, 28.216, -6485.999),
    ["Forgotten Island"] = CFrame.new(-3043.315, 238.881, -10191.819),
    ["Usoap Island"] = CFrame.new(4748.788, 8.456, 2849.579),
    ["Dark Arena"] = CFrame.new(3779.527, 13.826, -3500.131),

    -- Third Sea
    ["Port Town"] = CFrame.new(-290.223, 6.279, 5353.556),
    ["Hydra Island"] = CFrame.new(5228.884, 604.238, 345.501),
    ["Great Tree"] = CFrame.new(2681.273, 1682.809, -7260.354),
    ["Floating Turtle"] = CFrame.new(-13274.528, 331.378, -7625.546),
    ["Castle on the Sea"] = CFrame.new(-5056.5, 314.6, -3041.4),
    ["Haunted Castle"] = CFrame.new(-9515.372, 142.467, 5538.385),
    ["Sea of Treats"] = CFrame.new(-1990.672, 192.691, -11248.667),
    ["Tiki Outpost"] = CFrame.new(-16171.748, 29.221, 237.659)
}

local CurrentSeaIslands = {}

if Sea1 then
    CurrentSeaIslands = {
        "Pirate Starter", "Marine Starter", "Middle Town", "Jungle", "Pirate Village",
        "Desert", "Frozen Village", "Marine Fortress", "Prison", "Colosseum",
        "Magma Village", "Underwater City", "Fountain City", "Sky Island 1",
        "Sky Island 2", "Sky Island 3"
    }
elseif Sea2 then
    CurrentSeaIslands = {
        "Kingdom of Rose", "Cafe", "Green Zone", "Graveyard", "Snow Mountain",
        "Hot and Cold", "Cursed Ship", "Ice Castle", "Forgotten Island",
        "Usoap Island", "Dark Arena"
    }
elseif Sea3 then
    CurrentSeaIslands = {
        "Port Town", "Hydra Island", "Great Tree", "Floating Turtle",
        "Castle on the Sea", "Haunted Castle", "Sea of Treats", "Tiki Outpost"
    }
end

local SelectedIsland = CurrentSeaIslands[1] or "None"

local IslandDropdown = TeleportTab:AddDropdown({
    Name = "Select Island (" .. (Sea1 and "First Sea" or Sea2 and "Second Sea" or "Third Sea") .. ")",
    Options = CurrentSeaIslands,
    Default = SelectedIsland,
    Callback = function(Value)
        SelectedIsland = Value
    end
})

TeleportTab:AddButton({
    Name = "Teleport to Selected Island",
    Callback = function()
        if IslandCFrames[SelectedIsland] then
            PlayerTP(IslandCFrames[SelectedIsland] * CFrame.new(0, 30, 0)) -- Slight height to avoid spawn issues
            Window:MakeNotification({
                Name = "Teleported!",
                Content = "You have been teleported to " .. SelectedIsland,
                Time = 3
            })
        end
    end
})

-- Optional: Refresh dropdown if somehow sea changes (rare)
TeleportTab:AddButton({
    Name = "Refresh Island List",
    Callback = function()
        IslandDropdown:Refresh(CurrentSeaIslands, SelectedIsland)
    end
})
