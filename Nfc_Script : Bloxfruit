-- ==========================================
-- BLOX FRUITS SCRIPT - COMPLETE FIXED VERSION
-- by NFC Badal
-- ==========================================

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local VirtualInputManager = game:GetService("VirtualInputManager")

-- Player Variables
local Player = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- Game State Variables
local Sea1 = game.PlaceId == 2753915549
local Sea2 = game.PlaceId == 4442272183
local Sea3 = game.PlaceId == 7449423635

local PlayerLevel = Player.Data and Player.Data.Level or {Value = 1}
local MaxLevel = Sea1 and 700 or (Sea2 and 1500 or 2550)
local IsOwner = false -- Set your ownership check logic

-- Global Tables
local AFKOptions = {}
local BossListT = {
    "The Gorilla King", "Bobby", "Yeti", "Mob Leader", "Vice Admiral",
    "Warden", "Chief Warden", "Swan", "Magma Admiral", "Fishman Lord",
    "Wysper", "Thunder God", "Cyborg", "Soul Reaper", "Cursed Captain",
    "Order", "Darkbeard", "Stone", "Island Empress", "Kilo Admiral",
    "Captain Elephant", "Beautiful Pirate", "Cake Queen", "rip_indra True Form",
    "Longma", "Don Swan"
}

local Fruit_BlackList = {}

-- ==========================================
-- HELPER FUNCTIONS
-- ==========================================

local function FireRemote(...)
    local Remote = ReplicatedStorage:FindFirstChild("Remotes")
    if Remote then
        local CommF = Remote:FindFirstChild("CommF_")
        if CommF then
            return CommF:InvokeServer(...)
        end
    end
    return nil
end

local function PlayerTP(cframe)
    if not Player.Character or not Player.Character.PrimaryPart then return end
    Player.Character:SetPrimaryPartCFrame(cframe)
end

local function EquipTooltip(toolType)
    if not Player.Character then return end
    for _, tool in pairs(Player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == toolType then
            Player.Character.Humanoid:EquipTool(tool)
            return true
        end
    end
    return false
end

local function verifyTooltip(toolType)
    for _, tool in pairs(Player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == toolType then
            return true
        end
    end
    return false
end

local function KeyboardPress(key)
    VirtualInputManager:SendKeyEvent(true, key, false, game)
    task.wait(0.1)
    VirtualInputManager:SendKeyEvent(false, key, false, game)
end

local function AimBotPart(part)
    if not part or not Camera then return end
    Camera.CFrame = CFrame.new(Camera.CFrame.Position, part.Position)
end

local function VerifyNPC(npcName)
    local npcs = Workspace:WaitForChild("Enemies", 5)
    if npcs then
        return npcs:FindFirstChild(npcName) ~= nil
    end
    return false
end

local function Get_Fruit(fruitName)
    return fruitName:gsub(" Fruit", ""):gsub("-", "")
end

local function ServerHop()
    local HttpService = game:GetService("HttpService")
    local TeleportService = game:GetService("TeleportService")
    
    local success, result = pcall(function()
        local servers = HttpService:JSONDecode(
            game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
        )
        
        for _, server in pairs(servers.data) do
            if server.playing < server.maxPlayers and server.id ~= game.JobId then
                TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, Player)
                break
            end
        end
    end)
    
    if not success then
        warn("Server hop failed:", result)
    end
end

local function KillAura()
    if Player.Character then
        -- Implementation for race trials
    end
end

-- ==========================================
-- FARMING FUNCTIONS
-- ==========================================

local function AutoFarm_Level()
    while getgenv().AutoFarm_Level do
        task.wait()
        -- Add your level farming logic here
    end
end

local function AutoFarm_Nearest()
    while getgenv().AutoFarm_Nearest do
        task.wait()
        -- Add your nearest mob farming logic here
    end
end

local function AutoFarmBone()
    while getgenv().AutoFarmBone do
        task.wait()
        -- Add bone farming logic
    end
end

local function AutoSoulReaper()
    while getgenv().AutoSoulReaper do
        task.wait()
        -- Add soul reaper farming logic
    end
end

local function AutoFarmEctoplasm()
    while getgenv().AutoFarmEctoplasm do
        task.wait()
        -- Add ectoplasm farming logic
    end
end

local function AutoFactory()
    while getgenv().AutoFactory do
        task.wait()
        -- Add factory farming logic
    end
end

local function AutoPiratesSea()
    while getgenv().AutoPiratesSea do
        task.wait()
        -- Add pirate sea farming logic
    end
end

local function AutoChestTween()
    while getgenv().AutoChestTween do
        task.wait()
        -- Add chest farming with tween
    end
end

local function AutoChestBypass()
    while getgenv().AutoChestBypass do
        task.wait()
        -- Add chest farming with bypass
    end
end

local function AutoFarmBossSelected()
    while getgenv().AutoFarmBossSelected do
        task.wait()
        if getgenv().BossSelected then
            -- Farm selected boss logic
        end
    end
end

local function KillAllBosses()
    while getgenv().KillAllBosses do
        task.wait()
        -- Kill all bosses logic
    end
end

local function AutoFarmMaterial()
    while getgenv().AutoFarmMaterial do
        task.wait()
        if getgenv().MaterialSelected then
            -- Farm material logic
        end
    end
end

local function AutoFarmMastery()
    while getgenv().AutoFarmMastery do
        task.wait()
        -- Farm mastery logic
    end
end

local function AutoKitsuneIsland()
    while getgenv().AutoKitsuneIsland do
        task.wait()
        local Map = Workspace:FindFirstChild("Map")
        if Map and Map:FindFirstChild("KitsuneIsland") then
            local KitsuneIsland = Map.KitsuneIsland
            if Player.Character and Player.Character.PrimaryPart then
                PlayerTP(KitsuneIsland:GetPivot())
            end
        end
    end
end

local function AutoFarmSea()
    while getgenv().AutoFarmSea do
        task.wait()
        -- Add sea farming logic
    end
end

local function BuyNewBoat()
    FireRemote("BuyBoat", "PirateBrigade")
end

-- ==========================================
-- UI INITIALIZATION
-- ==========================================

local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/REDzHUB/RedzLibV5/main/Source.Lua"))()

local Window = redzlib:MakeWindow({
    Title = "NFC Script : Blox Fruits",
    SubTitle = "by NFC Badal",
    SaveFolder = "redz Hub | Blox Fruits.lua"
})

-- ==========================================
-- MAIN FARM TAB
-- ==========================================

local MainFarm = Window:MakeTab({"Farm", "Home"})

MainFarm:AddDropdown({
    Name = "Farm Tool",
    Options = {"Melee", "Sword", "Blox Fruit"},
    Default = "Melee",
    Flag = "Main/FarmTool",
    Callback = function(Value)
        getgenv().FarmTool = Value
    end
})

if PlayerLevel.Value >= MaxLevel and Sea3 then
    MainFarm:AddToggle({
        Name = "Start Multi Farm < BETA >",
        Callback = function(Value)
            for _, toggle in pairs(AFKOptions) do
                task.spawn(function()
                    toggle:Set(Value)
                end)
            end
        end
    })
end

MainFarm:AddSection({"Farm"})

MainFarm:AddToggle({
    Name = "Auto Farm Level",
    Default = false,
    Callback = function(Value)
        getgenv().AutoFarm_Level = Value
        if Value then task.spawn(AutoFarm_Level) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Nearest",
    Default = false,
    Callback = function(Value)
        getgenv().AutoFarm_Nearest = Value
        if Value then task.spawn(AutoFarm_Nearest) end
    end
})

if Sea3 then
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Pirates Sea",
        Default = false,
        Callback = function(Value)
            getgenv().AutoPiratesSea = Value
            if Value then task.spawn(AutoPiratesSea) end
        end
    }))
elseif Sea2 then
    MainFarm:AddToggle({
        Name = "Auto Factory",
        Default = false,
        Callback = function(Value)
            getgenv().AutoFactory = Value
            if Value then task.spawn(AutoFactory) end
        end
    })
end

if Sea3 then
    MainFarm:AddSection({"Bone"})
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Farm Bone",
        Callback = function(Value)
            getgenv().AutoFarmBone = Value
            if Value then task.spawn(AutoFarmBone) end
        end
    }))
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Hallow Scythe",
        Callback = function(Value)
            getgenv().AutoSoulReaper = Value
            if Value then task.spawn(AutoSoulReaper) end
        end
    }))
    
    table.insert(AFKOptions, MainFarm:AddToggle({
        Name = "Auto Trade Bone",
        Callback = function(Value)
            getgenv().AutoTradeBone = Value
            task.spawn(function()
                while getgenv().AutoTradeBone do
                    task.wait(1)
                    FireRemote("Bones", "Buy", 1, 1)
                end
            end)
        end
    }))
end

if Sea2 then
    MainFarm:AddSection({"Ectoplasm"})
    MainFarm:AddToggle({
        Name = "Auto Farm Ectoplasm",
        Callback = function(Value)
            getgenv().AutoFarmEctoplasm = Value
            if Value then task.spawn(AutoFarmEctoplasm) end
        end
    })
end

MainFarm:AddSection({"Chest"})

MainFarm:AddToggle({
    Name = "Auto Chest < Tween >",
    Callback = function(Value)
        getgenv().AutoChestTween = Value
        if Value then task.spawn(AutoChestTween) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Chest < Bypass >",
    Callback = function(Value)
        getgenv().AutoChestBypass = Value
        if Value then task.spawn(AutoChestBypass) end
    end
})

MainFarm:AddSection({"Bosses"})

local function UpdateBossList()
    local NewOptions = {}
    for _, NameBoss in pairs(BossListT) do
        if VerifyNPC(NameBoss) then
            table.insert(NewOptions, NameBoss)
        end
    end
    return NewOptions
end

MainFarm:AddButton({
    Name = "Update Boss List",
    Callback = function()
        pcall(UpdateBossList)
    end
})

local BossList = MainFarm:AddDropdown({
    Name = "Boss List",
    Options = UpdateBossList(),
    Callback = function(Value)
        getgenv().BossSelected = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Boss Selected",
    Callback = function(Value)
        getgenv().AutoFarmBossSelected = Value
        if Value then task.spawn(AutoFarmBossSelected) end
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm All Boss",
    Callback = function(Value)
        getgenv().KillAllBosses = Value
        if Value then task.spawn(KillAllBosses) end
    end
})

MainFarm:AddToggle({
    Name = "Take Quest",
    Default = true,
    Callback = function(Value)
        getgenv().TakeQuestBoss = Value
    end
})

MainFarm:AddButton({
    Name = "Server HOP",
    Callback = function()
        ServerHop()
    end
})

MainFarm:AddSection({"Material"})

local MaterialList = {}
if Sea1 then
    MaterialList = {"Angel Wings", "Leather + Scrap Metal", "Magma Ore", "Fish Tail"}
elseif Sea2 then
    MaterialList = {"Leather + Scrap Metal", "Magma Ore", "Mystic Droplet", "Radiactive Material", "Vampire Fang"}
elseif Sea3 then
    MaterialList = {"Leather + Scrap Metal", "Fish Tail", "Gunpowder", "Mini Tusk", "Conjured Cocoa", "Dragon Scale"}
end

MainFarm:AddDropdown({
    Name = "Material List",
    Options = MaterialList,
    Flag = "Material/Selected",
    Callback = function(Value)
        getgenv().MaterialSelected = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Material",
    Callback = function(Value)
        getgenv().AutoFarmMaterial = Value
        if Value then task.spawn(AutoFarmMaterial) end
    end
})

MainFarm:AddSection({"Mastery"})

MainFarm:AddSlider({
    Name = "Select Health",
    Min = 10,
    Max = 100,
    Default = 25,
    Callback = function(Value)
        getgenv().HealthSkill = Value
    end
})

MainFarm:AddDropdown({
    Name = "Select Tool",
    Options = {"Blox Fruit", "Melee", "Sword", "Gun"},
    Default = "Blox Fruit",
    Callback = function(Value)
        getgenv().ToolMastery = Value
    end
})

MainFarm:AddToggle({
    Name = "Auto Farm Mastery",
    Callback = function(Value)
        getgenv().AutoFarmMastery = Value
        if Value then task.spawn(AutoFarmMastery) end
    end
})

MainFarm:AddSection({"Skill"})

MainFarm:AddToggle({
    Name = "AimBot Skill Enemy",
    Flag = "Mastery/Aimbot",
    Default = true,
    Callback = function(Value)
        getgenv().AimBotSkill = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill Z",
    Flag = "Mastery/Z",
    Default = true,
    Callback = function(Value)
        getgenv().SkillZ = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill X",
    Flag = "Mastery/X",
    Default = true,
    Callback = function(Value)
        getgenv().SkillX = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill C",
    Flag = "Mastery/C",
    Default = true,
    Callback = function(Value)
        getgenv().SkillC = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill V",
    Flag = "Mastery/V",
    Default = true,
    Callback = function(Value)
        getgenv().SkillV = Value
    end
})

MainFarm:AddToggle({
    Name = "Skill F",
    Flag = "Mastery/F",
    Default = true,
    Callback = function(Value)
        getgenv().SkillF = Value
    end
})

-- ==========================================
-- SEA TAB (Sea 3 Only)
-- ==========================================

if Sea3 then
    local AutoSea = Window:MakeTab({"Sea", "Waves"})
    
    AutoSea:AddSection({"Kitsune"})
    
    local KILabel = AutoSea:AddParagraph({"Kitsune Island : not spawn"})
    
    AutoSea:AddToggle({
        Name = "Auto Kitsune Island",
        Callback = function(Value)
            getgenv().AutoKitsuneIsland = Value
            if Value then task.spawn(AutoKitsuneIsland) end
        end
    })
    
    AutoSea:AddToggle({
        Name = "Auto Trade Azure Ember",
        Callback = function(Value)
            getgenv().TradeAzureEmber = Value
            task.spawn(function()
                while getgenv().TradeAzureEmber do
                    task.wait(1)
                    local Modules = ReplicatedStorage:WaitForChild("Modules", 9e9)
                    local Net = Modules:WaitForChild("Net", 9e9)
                    local KitsuneRemote = Net:WaitForChild("RF/KitsuneStatuePray", 9e9)
                    KitsuneRemote:InvokeServer()
                end
            end)
        end
    })
    
    task.spawn(function()
        local Map = Workspace:WaitForChild("Map", 9e9)
        local Distance = "Unknown"
        
        task.spawn(function()
            while task.wait() do
                if Map:FindFirstChild("KitsuneIsland") then
                    local plrPP = Player.Character and Player.Character.PrimaryPart
                    if plrPP then
                        Distance = tostring(
                            math.floor((plrPP.Position - Map.KitsuneIsland:GetPivot().Position).Magnitude / 3)
                        )
                    end
                end
            end
        end)
        
        while task.wait(1) do
            if Map:FindFirstChild("KitsuneIsland") then
                KILabel:SetTitle("Kitsune Island : Spawned | Distance : " .. Distance)
            else
                KILabel:SetTitle("Kitsune Island : not Spawn")
            end
        end
    end)
    
    AutoSea:AddSection({"Sea"})
    
    AutoSea:AddToggle({
        Name = "Auto Farm Sea",
        Callback = function(Value)
            getgenv().AutoFarmSea = Value
            if Value then task.spawn(AutoFarmSea) end
        end
    })
    
    AutoSea:AddButton({
        Name = "Buy New Boat",
        Callback = function()
            BuyNewBoat()
        end
    })
    
    AutoSea:AddSection({"Material"})
    
    AutoSea:AddToggle({
        Name = "Auto Wood Planks",
        Default = false,
        Callback = function(Value)
            getgenv().AutoWoodPlanks = Value
            
            task.spawn(function()
                local Map = Workspace:WaitForChild("Map", 989)
                local BoatCastle = Map:WaitForChild("Boat Castle", 989)
                
                local function GetTreeModel()
                    for _, Model in pairs(BoatCastle.IslandModel:GetChildren()) do
                        if Model:IsA("Model") and Model:FindFirstChild("Tree") then
                            return Model
                        end
                    end
                end
                
                local function GetNearestTree()
                    local Tree = GetTreeModel()
                    local Nearest = math.huge
                    local SelectedTree
                    
                    if Tree then
                        for _, tree in pairs(Tree:GetChildren()) do
                            local plrPP = Player.Character and Player.Character.PrimaryPart
                            if tree.PrimaryPart and tree.PrimaryPart.Anchored and plrPP then
                                local dist = (plrPP.Position - tree.PrimaryPart.Position).Magnitude
                                if dist < Nearest then
                                    Nearest = dist
                                    SelectedTree = tree
                                end
                            end
                        end
                    end
                    
                    return SelectedTree
                end
                
                local RandomEquip = ""
                
                task.spawn(function()
                    while getgenv().AutoWoodPlanks do
                        task.wait(2)
                        if verifyTooltip("Melee") then
                            RandomEquip = "Melee"
                        elseif verifyTooltip("Blox Fruit") then
                            RandomEquip = "Blox Fruit"
                        elseif verifyTooltip("Sword") then
                            RandomEquip = "Sword"
                        elseif verifyTooltip("Gun") then
                            RandomEquip = "Gun"
                        end
                    end
                end)
                
                while getgenv().AutoWoodPlanks do
                    task.wait()
                    
                    local Tree = GetNearestTree()
                    EquipTooltip(RandomEquip)
                    
                    if Tree and Tree.PrimaryPart then
                        PlayerTP(Tree.PrimaryPart.CFrame)
                        
                        local plrPP = Player.Character and Player.Character.PrimaryPart
                        if plrPP and (plrPP.Position - Tree.PrimaryPart.Position).Magnitude < 10 then
                            if getgenv().SeaSkillZ then KeyboardPress("Z") end
                            if getgenv().SeaSkillX then KeyboardPress("X") end
                            if getgenv().SeaSkillC then KeyboardPress("C") end
                            if getgenv().SeaSkillV then KeyboardPress("V") end
                            if getgenv().SeaSkillF then KeyboardPress("F") end
                            
                            if getgenv().SeaAimBotSkill then
                                AimBotPart(Tree.PrimaryPart)
                            end
                        end
                    end
                end
            end)
        end
    })
    
    AutoSea:AddSection({"Panic Mode"})
    
    AutoSea:AddSlider({
        Name = "Select Health",
        Min = 20,
        Max = 70,
        Default = 25,
        Callback = function(Value)
            getgenv().HealthPanic = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Panic Mode",
        Default = true,
        Flag = "Sea/PanicMode",
        Callback = function(Value)
            getgenv().PanicMode = Value
        end
    })
    
    AutoSea:AddSection({"Farm Select"})
    AutoSea:AddParagraph({"Fish"})
    
    AutoSea:AddToggle({
        Name = "Terrorshark",
        Flag = "Sea/TerrorShark",
        Default = true,
        Callback = function(Value)
            getgenv().Terrorshark = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Piranha",
        Flag = "Sea/Piranha",
        Default = true,
        Callback = function(Value)
            getgenv().Piranha = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Fish Crew Member",
        Flag = "Sea/FishCrewMember",
        Default = true,
        Callback = function(Value)
            getgenv().FishCrewMember = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Shark",
        Flag = "Sea/Shark",
        Default = true,
        Callback = function(Value)
            getgenv().Shark = Value
        end
    })
    
    AutoSea:AddParagraph({"Boats"})
    
    AutoSea:AddToggle({
        Name = "Pirate Brigade",
        Flag = "Sea/PirateBrigade",
        Default = true,
        Callback = function(Value)
            getgenv().PirateBrigade = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Pirate Grand Brigade",
        Flag = "Sea/PirateGrandBrigade",
        Default = true,
        Callback = function(Value)
            getgenv().PirateGrandBrigade = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Fish Boat",
        Flag = "Sea/FishBoat",
        Default = true,
        Callback = function(Value)
            getgenv().FishBoat = Value
        end
    })
    
    AutoSea:AddSection({"Skill"})
    
    AutoSea:AddToggle({
        Name = "AimBot Skill Enemy",
        Flag = "Sea/Aimbot",
        Default = true,
        Callback = function(Value)
            getgenv().SeaAimBotSkill = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Skill Z",
        Flag = "Sea/Z",
        Default = true,
        Callback = function(Value)
            getgenv().SeaSkillZ = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Skill X",
        Flag = "Sea/X",
        Default = true,
        Callback = function(Value)
            getgenv().SeaSkillX = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Skill C",
        Flag = "Sea/C",
        Default = true,
        Callback = function(Value)
            getgenv().SeaSkillC = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Skill V",
        Flag = "Sea/V",
        Default = true,
        Callback = function(Value)
            getgenv().SeaSkillV = Value
        end
    })
    
    AutoSea:AddToggle({
        Name = "Skill F",
        Flag = "Sea/F",
        Default = true,
        Callback = function(Value)
            getgenv().SeaSkillF = Value
        end
    })
    
    AutoSea:AddSection({"NPCs"})
    
    AutoSea:AddToggle({
        Name = "Teleport To Shark Hunter",
        Callback = function(Value)
            getgenv().SharkHunterTP = Value
            task.spawn(function()
                while getgenv().SharkHunterTP do
                    task.wait()
                    PlayerTP(CFrame.new(-16525, 108, 752))
                end
            end)
        end
    })
    
    AutoSea:AddToggle({
        Name = "Teleport To Beast Hunter",
        Callback = function(Value)
            getgenv().BeastHunterTP = Value
            task.spawn(function()
                while getgenv().BeastHunterTP do
                    task.wait()
                    PlayerTP(CFrame.new(-16000, 100, 700))
                end
            end)
        end
    })
    
    AutoSea:AddToggle({
        Name = "Teleport To Spy",
        Callback = function(Value)
            getgenv().SpyTP = Value
            task.spawn(function()
                while getgenv().SpyTP do
                    task.wait()
                    PlayerTP(CFrame.new(-16471, 528, 539))
                end
            end)
        end
    })
    
    AutoSea:AddSection({"Configs"})
    
    AutoSea:AddDropdown({
        Name = "Tween Sea Level",
        Options = {"1", "2", "3", "4", "5", "6", "inf"},
        Default = "6",
        Flag = "Sea/SeaLevel",
        Callback = function(Value)
            getgenv().SeaLevelTP = Value
        end
    })
    
    AutoSea:AddSlider({
        Name = "Boat Tween Speed",
        Min = 100,
        Max = 300,
        Increment = 10,
        Default = 250,
        Flag = "Sea/BoatSpeed",
        Callback = function(Value)
            getgenv().SeaBoatSpeed = Value
        end
    })
end

-- ==========================================
-- RACE V4 / MIRAGE TAB
-- ==========================================

if Sea3 and IsOwner then
    local MirageTab = Window:MakeTab({"Race V4", "Star"})
    
    MirageTab:AddToggle({
        Name = "Auto Pull Lever",
        Default = false,
        Callback = function(Value)
            getgenv().AutoPullLever = Value
        end
    })
    
    MirageTab:AddToggle({
        Name = "Auto Stone Puzzle",
        Default = false,
        Callback = function(Value)
            getgenv().AutoStonePuzzle = Value
        end
    })
    
    MirageTab:AddSection({"Auto Mirage"})
    
    MirageTab:AddToggle({
        Name = "Auto Find Mirage",
        Default = false,
        Callback = function(Value)
            getgenv().AutoFindMirage = Value
        end
    })
    
    MirageTab:AddToggle({
        Name = "Auto Gear Puzzle",
        Default = false,
        Callback = function(Value)
            getgenv().AutoMiragePuzzle = Value
            
            if Value then
                task.spawn(function()
                    local function LookToMoon()
                        local moonDir = Lighting:GetMoonDirection()
                        local lookToPos = Camera.CFrame.Position + (moonDir * 100)
                        Camera.CFrame = CFrame.lookAt(Camera.CFrame.Position, lookToPos)
                    end
                    
                    local Connection = RunService.Heartbeat:Connect(LookToMoon)
                    
                    while getgenv().AutoMiragePuzzle do
                        task.wait()
                    end
